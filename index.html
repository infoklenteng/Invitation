<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuk Ngopi!</title>
    <style>
        /* --- TEMPLATE DEFAULT --- */
        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            background-color: #f9f5f3;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .invitation-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.1);
            padding: 35px;
            text-align: center;
            max-width: 650px;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #4a5568;
            margin-bottom: 15px;
            font-family: 'Comfortaa', cursive;
            font-size: 2.8em;
            animation: slideDownHeader 0.8s ease-out;
        }

        @keyframes slideDownHeader {
            0% { transform: translateY(-30px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .recipient-name {
            font-size: 1.6em;
            color: #2b6cb0;
            margin-bottom: 20px;
            animation: pulse 1.2s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.03); }
        }

        p {
            color: #718096;
            line-height: 1.7;
            margin-bottom: 30px;
            animation: fadeInUp 0.7s ease-in-out 0.3s forwards;
            opacity: 0;
        }

        @keyframes fadeInUp {
            0% { transform: translateY(25px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .cafe-details {
            margin-top: 30px;
            color: #a0aec0;
            animation: slideInLeft 0.9s ease-out 0.5s forwards;
            opacity: 0;
            line-height: 1.8;
        }

        @keyframes slideInLeft {
            0% { transform: translateX(-40px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .cafe-details strong {
            color: #4a5568;
        }

        .rsvp-button {
            display: inline-block;
            padding: 14px 35px;
            background-color: #68d391;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 25px;
            transition: background-color 0.3s ease;
            animation: scaleUpButton 1s ease-out 0.7s forwards;
            opacity: 0;
            cursor: pointer; /* Menambahkan cursor pointer */
        }

        @keyframes scaleUpButton {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .rsvp-button:hover {
            background-color: #48bb78;
        }

        footer {
            margin-top: 40px;
            color: #cbd5e0;
            font-size: 0.95em;
            animation: slideUpFooter 0.9s ease-out 0.9s forwards;
            opacity: 0;
        }

        @keyframes slideUpFooter {
            0% { transform: translateY(40px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        
        #countdown {
            margin-top: 30px;
            font-size: 1.2em;
            font-weight: bold;
            color: #555;
            text-align: center;
        }

        /* --- [CSS TEMPLATE LAINNYA TETAP SAMA] --- */
        /* --- TEMPLATE 1: MINIMALIS --- */
        .minimalis body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; }
        .minimalis .invitation-container { background-color: #fff; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); padding: 30px; max-width: 550px; }
        .minimalis h1 { color: #343a40; font-size: 2.2em; }
        .minimalis .recipient-name { color: #2f4f4f; font-size: 1.4em; }
        .minimalis p { color: #495057; }
        .minimalis .cafe-details { color: #6c757d; }
        .minimalis .cafe-details strong { color: #343a40; }
        .minimalis .rsvp-button { background-color: #5a9a68; }
        .minimalis .rsvp-button:hover { background-color: #44744f; }
        .minimalis footer { color: #adb5bd; }

        /* --- TEMPLATE 2: MODERN GELAP --- */
        .modern-gelap body { font-family: 'Roboto', sans-serif; background: linear-gradient(to bottom, #333, #222); }
        .modern-gelap .invitation-container { background-color: #333; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5); padding: 35px; max-width: 600px; }
        .modern-gelap h1 { color: #eee; font-size: 2.5em; }
        .modern-gelap .recipient-name { color: #64b5f6; font-size: 1.5em; }
        .modern-gelap p { color: #ddd; }
        .modern-gelap .cafe-details { color: #bbb; }
        .modern-gelap .cafe-details strong { color: #eee; }
        .modern-gelap .rsvp-button { background-color: #a1887f; }
        .modern-gelap .rsvp-button:hover { background-color: #795548; }
        .modern-gelap footer { color: #888; }
        .modern-gelap #countdown { color: #ccc; }

        /* --- TEMPLATE 3: RETRO VINTAGE --- */
        .retro-vintage body { font-family: 'Courier New', Courier, monospace; background-color: #fdf0d5; }
        .retro-vintage .invitation-container { background-color: #e6d7b3; border: 2px dashed #8b4513; padding: 30px; max-width: 580px; }
        .retro-vintage h1 { color: #a0522d; font-family: 'Rockwell', serif; text-shadow: 1px 1px #d3c5a3; }
        .retro-vintage .recipient-name { color: #8B0000; font-size: 1.5em; }
        .retro-vintage p { color: #654321; }
        .retro-vintage .cafe-details { color: #808080; }
        .retro-vintage .cafe-details strong { color: #8b4513; }
        .retro-vintage .rsvp-button { background-color: #b8860b; }
        .retro-vintage .rsvp-button:hover { background-color: #a0522d; }
        .retro-vintage footer { color: #776e65; }

        /* --- TEMPLATE 4: COZY NATURAL --- */
        .cozy-natural body { font-family: 'Open Sans', sans-serif; background-color: #e9ecef; }
        .cozy-natural .invitation-container { background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 35px; max-width: 620px; }
        .cozy-natural h1 { color: #27ae60; font-family: 'Montserrat', sans-serif; }
        .cozy-natural .recipient-name { color: #8B4513; font-size: 1.55em; }
        .cozy-natural p { color: #555; }
        .cozy-natural .cafe-details { color: #777; }
        .cozy-natural .cafe-details strong { color: #333; }
        .cozy-natural .rsvp-button { background-color: #f39c12; }
        .cozy-natural .rsvp-button:hover { background-color: #e67e22; }
        .cozy-natural footer { color: #999; }
        .cozy-natural #countdown { color: #555; }

        /* --- TEMPLATE 5: VIBRANT FUN --- */
        .vibrant-fun body { font-family: 'Quicksand', sans-serif; background-color: #ffebee; }
        .vibrant-fun .invitation-container { background-color: #fff; border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); padding: 40px; max-width: 590px; }
        .vibrant-fun h1 { color: #ff6f61; font-family: 'Fredoka One', cursive; text-shadow: 2px 2px #f48fb1; }
        .vibrant-fun .recipient-name { color: #9c27b0; font-size: 1.7em; }
        .vibrant-fun p { color: #6a1b9a; }
        .vibrant-fun .cafe-details { color: #e91e63; }
        .vibrant-fun .cafe-details strong { color: #d81b60; }
        .vibrant-fun .rsvp-button { background-color: #4dd0e1; animation: tada 2s infinite; }
        .vibrant-fun .rsvp-button:hover { background-color: #00bcd4; }
        .vibrant-fun footer { color: #f06292; }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI&family=Roboto&family=Courier+New&family=Rockwell&family=Open+Sans&family=Montserrat:wght@700&family=Quicksand&family=Fredoka+One&display=swap" rel="stylesheet">
</head>
<body>
    <div class="invitation-container">
        <h1 id="headerText">Kopi Darat Yuk!</h1>
        <p class="recipient-name" id="invitedName">Hai, [Nama Teman]</p>
        <p id="invitationText">Pengen ngobrolin banyak hal sambil menikmati kopi enak. Kamu ada waktu?</p>
        
        <div class="cafe-details">
            <strong>Tempat:</strong> <span id="cafeName">[Nama Cafe]</span><br>
            <strong>Lokasi:</strong> <span id="cafeLocation">[Alamat Cafe]</span><br>
            <strong>Waktu:</strong> <span id="coffeeTime">[Hari], [Tanggal] pukul [Waktu]</span>
        </div>

        <div id="countdown">
            Menghitung Waktu...
        </div>
        <a class="rsvp-button" onclick="kirimKonfirmasiWhatsApp()">Aku Ikut!</a>
        <footer id="footerText">Ditunggu ya!</footer>
    </div>

    <script>
        // --- [FUNGSI getQueryParam, loadInvitationData, shadeColor, startCountdown TETAP SAMA] ---
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const invitedName = getQueryParam('nama');
            if (invitedName) {
                document.getElementById('invitedName').textContent = `Hai, ${decodeURIComponent(invitedName)}!`;
            }
            loadInvitationData();
        });

        function loadInvitationData() {
            const storedData = localStorage.getItem('coffeeInvitationData');
            const body = document.body;
            const invitationContainer = document.querySelector('.invitation-container');
            
            const defaultData = {
                header: 'Kopi Darat Yuk!',
                invitation: 'Pengen ngobrolin banyak hal sambil menikmati kopi enak. Kamu ada waktu?',
                cafe: '[Nama Cafe]',
                location: '[Alamat Cafe]',
                dateTime: '',
                footer: 'Ditunggu ya!',
                color: '#2b6cb0',
                template: 'minimalis'
            };

            let invitationData = storedData ? JSON.parse(storedData) : defaultData;

            document.getElementById('headerText').textContent = invitationData.header || defaultData.header;
            document.getElementById('invitationText').textContent = invitationData.invitation || defaultData.invitation;
            document.getElementById('cafeName').textContent = invitationData.cafe || defaultData.cafe;
            document.getElementById('cafeLocation').textContent = invitationData.location || defaultData.location;
            document.getElementById('footerText').textContent = invitationData.footer || defaultData.footer;

            let targetDate;
            if (invitationData.dateTime) {
                const dateTime = new Date(invitationData.dateTime);
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric' };
                document.getElementById('coffeeTime').textContent = dateTime.toLocaleDateString('id-ID', options);
                targetDate = dateTime.getTime();
            } else {
                document.getElementById('coffeeTime').textContent = "[Hari], [Tanggal] pukul [Waktu]";
                document.getElementById('countdown').style.display = 'none';
            }
            
            if (targetDate) {
                document.getElementById('countdown').style.display = 'block';
                startCountdown(targetDate);
            }

            body.className = '';
            invitationContainer.className = 'invitation-container';
            const selectedTemplate = invitationData.template || defaultData.template;
            body.classList.add(selectedTemplate);

            const primaryColor = invitationData.color || defaultData.color;
            const h1Element = document.querySelector('h1');
            const rsvpButton = document.querySelector('.rsvp-button');
            const recipientName = document.querySelector('.recipient-name');

            if (h1Element) h1Element.style.color = primaryColor;
            if (rsvpButton) {
                rsvpButton.style.backgroundColor = primaryColor;
                rsvpButton.addEventListener('mouseover', () => rsvpButton.style.backgroundColor = shadeColor(primaryColor, -20));
                rsvpButton.addEventListener('mouseout', () => rsvpButton.style.backgroundColor = primaryColor);
            }
            if (recipientName) recipientName.style.color = shadeColor(primaryColor, -15);
        }

        function shadeColor(color, percent) {
            var f=parseInt(color.slice(1),16),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=f>>16,G=f>>8&0x00FF,B=f&0x0000FF;
            return "#"+(0x1000000+(Math.round((t-R)*p)+R)*0x10000+(Math.round((t-G)*p)+G)*0x100+(Math.round((t-B)*p)+B)).toString(16).slice(1);
        }
        
        let countdownInterval;
        function startCountdown(targetTime) {
            clearInterval(countdownInterval);
            const countdownElement = document.getElementById("countdown");

            const updateCountdown = () => {
                const now = new Date().getTime();
                const timeLeft = targetTime - now;

                if (timeLeft <= 0) {
                    countdownElement.textContent = "Waktunya Ngopi!";
                    clearInterval(countdownInterval);
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                countdownElement.textContent = `Waktu menuju ngopi: ${days} hari, ${hours} jam, ${minutes} menit, ${seconds} detik`;
            };

            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }
        
        // FUNGSI BARU: Untuk mengirim konfirmasi via WhatsApp
        function kirimKonfirmasiWhatsApp() {
            // !!! PENTING: Ganti dengan nomor WhatsApp Anda (gunakan format 628xxxx)
            const nomorAdmin = '628170000889'; 

            // Mengambil data dari halaman
            const namaTamu = getQueryParam('nama') || 'Teman';
            const namaKafe = document.getElementById('cafeName').textContent;
            const waktuKopi = document.getElementById('coffeeTime').textContent;

            // Membuat template pesan
            const pesan = `Halo! Saya, *${namaTamu}*, mengonfirmasi akan hadir di acara ngopi.\n\n*Tempat:* ${namaKafe}\n*Waktu:* ${waktuKopi}\n\nTerima kasih atas undangannya!`;

            // Membuat URL WhatsApp
            const urlWhatsApp = `https://api.whatsapp.com/send?phone=${nomorAdmin}&text=${encodeURIComponent(pesan)}`;

            // Membuka WhatsApp di tab baru
            window.open(urlWhatsApp, '_blank');
        }

        window.addEventListener('storage', () => {
            loadInvitationData();
        });
    </script>
</body>
</html>
