<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuk Ngopi!</title>
    <style>
        /* --- TEMPLATE DEFAULT --- */
        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            background-color: #f9f5f3;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .invitation-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.1);
            padding: 35px;
            text-align: center;
            max-width: 650px;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #4a5568;
            margin-bottom: 15px;
            font-family: 'Comfortaa', cursive;
            font-size: 2.8em;
            animation: slideDownHeader 0.8s ease-out;
        }

        @keyframes slideDownHeader {
            0% { transform: translateY(-30px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .recipient-name {
            font-size: 1.6em;
            color: #2b6cb0;
            margin-bottom: 20px;
            animation: pulse 1.2s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.03); }
        }

        p {
            color: #718096;
            line-height: 1.7;
            margin-bottom: 30px;
            animation: fadeInUp 0.7s ease-in-out 0.3s forwards;
            opacity: 0;
        }

        @keyframes fadeInUp {
            0% { transform: translateY(25px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .cafe-details {
            margin-top: 30px;
            color: #a0aec0;
            animation: slideInLeft 0.9s ease-out 0.5s forwards;
            opacity: 0;
        }

        @keyframes slideInLeft {
            0% { transform: translateX(-40px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .cafe-details strong {
            color: #4a5568;
        }

        .rsvp-button {
            display: inline-block;
            padding: 14px 35px;
            background-color: #68d391;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 25px;
            transition: background-color 0.3s ease;
            animation: scaleUpButton 1s ease-out 0.7s forwards;
            opacity: 0;
        }

        @keyframes scaleUpButton {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .rsvp-button:hover {
            background-color: #48bb78;
        }

        footer {
            margin-top: 40px;
            color: #cbd5e0;
            font-size: 0.95em;
            animation: slideUpFooter 0.9s ease-out 0.9s forwards;
            opacity: 0;
        }

        @keyframes slideUpFooter {
            0% { transform: translateY(40px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        /* --- TEMPLATE 1: MINIMALIS --- */
        .minimalis body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }

        .minimalis .invitation-container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            padding: 30px;
            max-width: 550px;
        }

        .minimalis h1 {
            color: #343a40;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .minimalis .recipient-name {
            font-size: 1.4em;
            color: #007bff;
            margin-bottom: 15px;
        }

        .minimalis p {
            color: #495057;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .minimalis .cafe-details {
            margin-top: 25px;
            color: #6c757d;
        }

        .minimalis .cafe-details strong {
            color: #343a40;
        }

        .minimalis .rsvp-button {
            padding: 10px 25px;
            background-color: #28a745;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1em;
            margin-top: 15px;
        }

        .minimalis .rsvp-button:hover {
            background-color: #1e7e34;
        }

        .minimalis footer {
            margin-top: 30px;
            color: #adb5bd;
            font-size: 0.9em;
        }

        /* --- TEMPLATE 2: MODERN GELAP --- */
        .modern-gelap body {
            font-family: 'Roboto', sans-serif;
            background-color: #222;
        }

        .modern-gelap .invitation-container {
            background-color: #333;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            padding: 35px;
            max-width: 600px;
        }

        .modern-gelap h1 {
            color: #eee;
            margin-bottom: 15px;
            font-size: 2.5em;
        }

        .modern-gelap .recipient-name {
            font-size: 1.5em;
            color: #64b5f6;
            margin-bottom: 25px;
        }

        .modern-gelap p {
            color: #ddd;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .modern-gelap .cafe-details {
            margin-top: 35px;
            color: #bbb;
        }

        .modern-gelap .cafe-details strong {
            color: #eee;
        }

        .modern-gelap .rsvp-button {
            padding: 12px 30px;
            background-color: #a1887f;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 20px;
        }

        .modern-gelap .rsvp-button:hover {
            background-color: #795548;
        }

        .modern-gelap footer {
            margin-top: 45px;
            color: #888;
            font-size: 0.9em;
        }

        /* --- TEMPLATE 3: RETRO VINTAGE --- */
        .retro-vintage body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #fdf0d5;
        }

        .retro-vintage .invitation-container {
            background-color: #e6d7b3;
            border: 2px dashed #8b4513;
            border-radius: 10px;
            padding: 30px;
            max-width: 580px;
        }

        .retro-vintage h1 {
            color: #a0522d;
            margin-bottom: 12px;
            font-size: 2.4em;
            font-family: 'Rockwell', serif;
        }

        .retro-vintage .recipient-name {
            font-size: 1.5em;
            color: #d2691e;
            margin-bottom: 20px;
        }

        .retro-vintage p {
            color: #654321;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .retro-vintage .cafe-details {
            margin-top: 30px;
            color: #808080;
        }

        .retro-vintage .cafe-details strong {
            color: #8b4513;
        }

        .retro-vintage .rsvp-button {
            padding: 11px 28px;
            background-color: #b8860b;
            border-radius: 8px;
            font-weight: bold;
        }
        .retro-vintage .rsvp-button {
            font-size: 1.05em;
            margin-top: 20px;
        }

        .retro-vintage .rsvp-button:hover {
            background-color: #a0522d;
        }

        .retro-vintage footer {
            margin-top: 35px;
            color: #776e65;
            font-size: 0.85em;
        }

        /* --- TEMPLATE 4: COZY NATURAL --- */
        .cozy-natural body {
            font-family: 'Open Sans', sans-serif;
            background-color: #e9ecef;
        }

        .cozy-natural .invitation-container {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 35px;
            max-width: 620px;
        }

        .cozy-natural h1 {
            color: #27ae60;
            margin-bottom: 18px;
            font-size: 2.6em;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }

        .cozy-natural .recipient-name {
            font-size: 1.55em;
            color: #8e44ad;
            margin-bottom: 22px;
        }

        .cozy-natural p {
            color: #555;
            line-height: 1.75;
            margin-bottom: 30px;
        }

        .cozy-natural .cafe-details {
            margin-top: 40px;
            color: #777;
        }

        .cozy-natural .cafe-details strong {
            color: #333;
        }

        .cozy-natural .rsvp-button {
            padding: 13px 32px;
            background-color: #f39c12;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.15em;
            margin-top: 25px;
        }

        .cozy-natural .rsvp-button:hover {
            background-color: #e67e22;
        }

        .cozy-natural footer {
            margin-top: 45px;
            color: #999;
            font-size: 0.95em;
        }

        /* --- TEMPLATE 5: VIBRANT FUN --- */
        .vibrant-fun body {
            font-family: 'Quicksand', sans-serif;
            background-color: #ffebee;
        }

        .vibrant-fun .invitation-container {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 590px;
        }

        .vibrant-fun h1 {
            color: #ff6f61;
            margin-bottom: 20px;
            font-size: 3em;
            font-family: 'Fredoka One', cursive;
            text-shadow: 2px 2px #f48fb1;
        }

        .vibrant-fun .recipient-name {
            font-size: 1.7em;
            color: #9c27b0;
            margin-bottom: 25px;
        }

        .vibrant-fun p {
            color: #6a1b9a;
            line-height: 1.8;
            margin-bottom: 35px;
        }

        .vibrant-fun .cafe-details {
            margin-top: 40px;
            color: #e91e63;
        }

        .vibrant-fun .cafe-details strong {
            color: #d81b60;
        }

        .vibrant-fun .rsvp-button {
            padding: 15px 40px;
            background-color: #4dd0e1;
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 30px;
            transition: background-color 0.3s ease;
            animation: tada 2s infinite;
        }

        .vibrant-fun .rsvp-button:hover {
            background-color: #00bcd4;
        }

        .vibrant-fun footer {
            margin-top: 50px;
            color: #f06292;
            font-size: 1em;
        }
        /* --- Countdown Timer --- */
        #countdown {
            margin-top: 30px;
            font-size: 1.2em;
            font-weight: bold;
            color: #555;
            text-align: center;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI&family=Roboto&family=Courier+New&family=Rockwell&family=Open+Sans&family=Montserrat:wght@700&family=Quicksand&family=Fredoka+One&display=swap" rel="stylesheet">
</head>
<body>
    <div class="invitation-container">
        <h1 id="headerText">Kopi Darat Yuk!</h1>
        <p class="recipient-name" id="invitedName">Hai, [Nama Teman]</p>
        <p id="invitationText">Gimana kalau kita ngopi santai di <span id="cafeName">[Nama Cafe]</span>? Pengen ngobrolin banyak hal sambil menikmati kopi enak. Kamu ada waktu?</p>
        <div class="cafe-details">
            <strong>Lokasi:</strong> <span id="cafeLocation">[Alamat Cafe]</span><br>
            <strong>Hari & Waktu:</strong> <span id="coffeeTime">[Hari], [Tanggal] pukul [Waktu]</span>
        </div>
        <div id="countdown">
            Menghitung Waktu...
        </div>
        <a href="#" class="rsvp-button" onclick="alert('Sip! Sampai ketemu di sana ya!')">Aku Ikut!</a>
        <footer id="footerText">Ditunggu ya!</footer>
    </div>

    <script>
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const invitedName = getQueryParam('nama');
            if (invitedName) {
                document.getElementById('invitedName').textContent = `Hai, ${invitedName}!`;
            }
            loadInvitationData();
        });

        function loadInvitationData() {
            const storedData = localStorage.getItem('coffeeInvitationData');
            const body = document.body;
            const invitationContainer = document.querySelector('.invitation-container');
            const defaultData = {
                header: 'Kopi Darat Yuk!',
                invitation: 'Gimana kalau kita ngopi santai di [Nama Cafe]? Pengen ngobrolin banyak hal sambil menikmati kopi enak. Kamu ada waktu?',
                cafe: '[Nama Cafe]',
                location: '[Alamat Cafe]',
                dateTime: '',
                footer: 'Ditunggu ya!',
                color: '#2b6cb0',
                template: 'minimalis'
            };

            let invitationData = storedData ? JSON.parse(storedData) : defaultData;

            document.getElementById('headerText').textContent = invitationData.header || defaultData.header;
            document.getElementById('invitationText').textContent = invitationData.invitation || defaultData.invitation;
            document.getElementById('cafeName').textContent = invitationData.cafe || defaultData.cafe;
            document.getElementById('cafeLocation').textContent = invitationData.location || defaultData.location;
            document.getElementById('footerText').textContent = invitationData.footer || defaultData.footer;

            // Format tanggal dan waktu dan atur targetDate
            let targetDate;
            if (invitationData.dateTime) {
                const dateTime = new Date(invitationData.dateTime);
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', timeZoneName: 'short' };
                document.getElementById('coffeeTime').textContent = dateTime.toLocaleDateString('id-ID', options);
                targetDate = dateTime.getTime();
            } else {
                document.getElementById('coffeeTime').textContent = defaultData.time;
                const defaultTargetDate = new Date();
                defaultTargetDate.setHours(20);
                defaultTargetDate.setMinutes(0);
                defaultTargetDate.setDate(defaultTargetDate.getDate() + 7);
                targetDate = defaultTargetDate.getTime();
            }
            if (targetDate) {
                startCountdown(targetDate); // Panggil startCountdown setelah targetDate diatur
            }

            body.className = '';
            invitationContainer.className = 'invitation-container';
            const selectedTemplate = invitationData.template || defaultData.template;
            if (selectedTemplate) {
                body.classList.add(selectedTemplate);
            }

            const primaryColor = invitationData.color || defaultData.color;
            const h1Element = document.querySelector('h1');
            const rsvpButton = document.querySelector('.rsvp-button');
            const recipientName = document.querySelector('.recipient-name');

            if (h1Element) h1Element.style.color = primaryColor;
            if (rsvpButton) {
                rsvpButton.style.backgroundColor = primaryColor;
                rsvpButton.addEventListener('mouseover', () => {
                    rsvpButton.style.backgroundColor = shadeColor(primaryColor, -20);
                });
                rsvpButton.addEventListener('mouseout', () => {
                    rsvpButton.style.backgroundColor = primaryColor;
                });
            }
            if (recipientName) recipientName.style.color = shadeColor(primaryColor, -15);
        }

        function shadeColor(color, percent) {
            var f=parseInt(color.slice(1),16),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=f>>16,G=f>>8&0x00FF,B=f&0x0000FF;
            return "#"+(0x1000000+(Math.round((t-R)*p)+R)*0x10000+(Math.round((t-G)*p)+G)*0x100+(Math.round((t-B)*p)+B)).toString(16).slice(1);
        }

        function startCountdown(targetTime) {
            const countdownElement = document.getElementById("countdown");

            const updateCountdown = () => {
                const now = new Date().getTime();
                const timeLeft = targetTime - now;

                if (timeLeft <= 0) {
                    countdownElement.textContent = "Waktunya Ngopi!";
                    clearInterval(countdownInterval);
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                countdownElement.textContent = `Waktu menuju ngopi: ${days} hari, ${hours} jam, ${minutes} menit, ${seconds} detik`;
            };

            updateCountdown();
            const countdownInterval = setInterval(updateCountdown, 1000);
        }

        window.addEventListener('storage', () => {
            loadInvitationData();
        });
    </script>
</body>
</html>
